---
title: 前端性能优化之网络负载
date: 2025-04-26 23:28:08
updated:
category: ['技术']
tags: ['前端','性能优化','网络负载']
cover: https://s1.imagehub.cc/images/2025/04/26/59a811e71f3f9e747ff98f2555a10a41.md.jpg
main_color: "#0157E8"
keywords:
description:
top_img:
comments:
aside:
---

# 网络优化

**配置优化：**通过调整构建工具（如`Webpack`或`Vite`）的配置，比如代码压缩、`Tree Shaking`和代码分割，减少打包体积和加载时间。

**访问优化：**包括图片懒加载、预加载关键资源，以及优化`DOM`操作，减少渲染阻塞，提升用户体验。

通过减少`HTTP`请求、启用`HTTP/2`、使用`CDN`和缓存策略，提升资源加载速度。

避免巨大的网络负载是`Lighthouse`的一个审计指标，它指的是**前端文件通过网络传输的总大小**。

需要实施一个全面的`Web`性能优化流程：识别特定问题、可视化`HTML`和`CSS`文件、压缩和精简代码、减小字体和图片的体积等。

**网络负载**是指页面从自身服务器或第三方服务器通过互联网下载的所有文件的总和。

## 优化网络负载

需要减少资源的总大小：

1. **移除不必要的资源**
    - 找出那些对用户体验没有显著影响的资源，并将它们从页面中移除。
    - 未使用的`CSS`和`JavaScript`文件、过大的图片等
2. **减小资源的下载大小**
    - 使用压缩工具（如`Gzip`或`Brotli`）压缩`HTML`、`CSS`和`JavaScript`文件。
    - 优化图片和字体大小，采用现代格式（如`webP`和`woff2`）。
3. **延迟加载资源（Lazy Loading）**
    - 仅在用户需要某些资源时才进行下载。
    - 使用`loading="lazy"`属性为图片和`iframe`添加懒加载。

**Lighthouse记录的是页面初始加载时的网络负载。**这意味着报告显示的资源大小是页面首次加载时所有请求的总和。

根据`Lighthouse`的文档，当网络负载满足以下条件时，就会被认为是“巨大”：

> 根据`HTTP Archive`的数据，网络负载的中位数在`1700`到`1900``KiB`之间。为了突出最重的网络负载，`Lighthouse`会标记那些总网络请求超过`5000``KiB`的页面。

1. **黄色警告标志的触发条件**
    - 当网络负载超过`2667KB`时，`Lighthouse`会触发黄色警告标志（`yellow flag`）。
    - 低于这个值，则显示灰色信息标志（`grey flag`），表示通过。
2. **永远没有绿色标志**
3. **没有红色标志**
    - 即使网络负载非常高，`Lighthouse`也不会触发红色标志（`red flag`）。它只会显示黄色标志，提示需要优化。

1. **灰色标志**：表示通过审计，但仅限于网络负载低于`2667KB`的情况。
2. **黄色标志**：表示未通过审计，网络负载超过`2667KB`。
3. **红色标志**：不会触发，即使网络负载非常高。

- **灰色标志=成功**：网络负载低于`2667KB`。
- **黄色标志=失败**：网络负载高于`2667KB`。

因此，优化目标是让网络负载尽可能小，以达到灰色标志的标准。

巨大的网络负载会对`Web`性能产生严重影响，不仅会导致页面加载变慢，有时还会引发意外的布局偏移问题。